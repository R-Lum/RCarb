<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with RCarb • RCarb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started with RCarb">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RCarb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/GetStarted.html">Get started with RCarb</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Get started with RCarb</h1>
                        <h4 class="author">Sebastian Kreutzer, IRAMAT-CRP2A, UMR 5060, CNRS - Université Bordeaux Montagine (France) &amp; <br> Barbara Mauz, Department of Geography and Geology, University of Salzburg, Salzburg (Austria)</h4>
            
            <h4 class="date">Last modified: 2018-11-30 (‘RCarb’ version: 0.1.2)</h4>
      
      
      <div class="hidden name"><code>GetStarted.Rmd</code></div>

    </div>

    
    
<p><img src="../docs/img/Logo_RCarb.png" width="100" style="display: block; margin: auto;"></p>
<div id="scope" class="section level1">
<h1 class="hasAnchor">
<a href="#scope" class="anchor"></a>Scope</h1>
<p>Getting started with a new R package can be a very tedious business (if not to say annoying). This document was written with the intention to make the first steps as painless as possible.</p>
</div>
<div id="quick-start-with-the-example-dataset" class="section level1">
<h1 class="hasAnchor">
<a href="#quick-start-with-the-example-dataset" class="anchor"></a>Quick start with the example dataset</h1>
<p>If you have no idea what a function does and how it works, it is always a good idea to have a closer look into the example sections of the package functions. The package ‘RCarb’ has one central function named <code><a href="../reference/model_DoseRate.html">model_DoseRate()</a></code>. The example given in the example section in the manual will be used in the following to illustrate the central package functionality in three steps.</p>
<div id="load-rcarb" class="section level2">
<h2 class="hasAnchor">
<a href="#load-rcarb" class="anchor"></a>Load ‘RCarb’</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(RCarb)</a></code></pre></div>
</div>
<div id="load-example-data" class="section level2">
<h2 class="hasAnchor">
<a href="#load-example-data" class="anchor"></a>Load example data</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">##load example data</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"Example_Data"</span>, <span class="dt">envir =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/environment">environment</a></span>())</a></code></pre></div>
<p>To get a first impression on how the example dataset looks like, you call the function <code><a href="https://www.rdocumentation.org/packages/utils/topics/head">head()</a></code> to print the first five rows of a <code>data.frame</code> on the terminal.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(Example_Data)</a></code></pre></div>
<pre><code>##   SAMP_NAME     K   K_X    T  T_X    U  U_X U238 U238_X U234_U238
## 1     BN107 0.080 0.010 1.64 0.08 1.90 0.08    0      0         0
## 2     BN102 0.170 0.009 2.59 0.03 3.02 0.07    0      0         0
## 3     BN106 0.560 0.030 1.80 0.11 0.83 0.03    0      0         0
## 4      LV61 0.131 0.005 0.85 0.03 0.86 0.11    0      0         0
## 5      LV99 0.047 0.003 0.59 0.03 1.94 0.11    0      0         0
## 6      D101 0.105 0.004 0.65 0.02 1.25 0.08    0      0         0
##   U234_U238_X WCI WCI_X WCF WCF_X CC CC_X DIAM DIAM_X COSMIC COSMIC_X
## 1           0  20     7   7     7 62    1  180     10  0.180   0.0100
## 2           0  20    10  10    10 68    1  180     22  0.180   0.0100
## 3           0  20     6   6     6 49    1  145     15  0.180   0.0100
## 4           0  12     5   2     2 17    1  210     30  0.069   0.0035
## 5           0   8     3   5     5 61    3  210     30  0.182   0.0090
## 6           0   8     3   2     2 59    2  210     20  0.180   0.0100
##   INTERNAL INTERNAL_X ONSET ONSET_X FINISH FINISH_X  DE DE_X
## 1        0          0   100      10     40       10  98    9
## 2        0          0   100      10     40       10 130   10
## 3        0          0   100      10     40       10 120   10
## 4        0          0   120      10     40       10  52    5
## 5        0          0    60      10     40       10  50    4
## 6        0          0   180      10    130       10  81    5</code></pre>
<p>Unfortunately, the naming of the table columns is not straightforward to understand. The good news is that each column carries additional information that can be seen in the R terminal by typing, e.g., for the column ‘K’ (which is the 2nd column):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attributes">attributes</a></span>(Example_Data<span class="op">$</span>K)</a></code></pre></div>
<pre><code>## $UNIT
## [1] "%"
## 
## $DESCRIPTION
## [1] "K concentration"</code></pre>
<p>It reveals that the numbers in the column correspond to the potassium concentration and are given in ‘%’. Similar all other columns can be inspected.</p>
</div>
<div id="run-dose-rate-modelling" class="section level2">
<h2 class="hasAnchor">
<a href="#run-dose-rate-modelling" class="anchor"></a>Run dose rate modelling</h2>
<p>Now we want to start the modelling using the data given for the first sample only.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">##extract only the first row </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">data &lt;-<span class="st"> </span>Example_Data[<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">##run model </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">results &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_DoseRate.html">model_DoseRate</a></span>(</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="dt">data =</span> data,</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  <span class="dt">n.MC =</span> <span class="dv">10</span>, </a>
<a class="sourceLine" id="cb7-8" data-line-number="8">  <span class="dt">txtProgressBar =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## 
## [model_DoseRate()]
## 
##  Sample ID:       BN107 
##  Equivalent dose:     98  ±  9 Gy
##  Diameter:        180 µm 
##  MC runs error estim.:    10  
##  ------------------------------------------------ 
##  Age (conv.):         133.451  ±  15.501  ka
##  Age (new):       117.443  ±  9.082  ka
## 
##  Dose rate (conv.):   0.734  ±  0.047  Gy/ka
##  Dose rate (onset):   0.967  ±  0.038  Gy/ka
##  Dose rate (final):   0.75  ±  0.036  Gy/ka
##  ------------------------------------------------</code></pre>
<p><img src="GetStarted_files/figure-html/unnamed-chunk-6-1.png" width="480" style="display: block; margin: auto;"></p>
<p>The function returns a terminal output along with two plots, which are mostly similar to the original graphical output provided by the ‘MATLAB’ program ‘Carb’.</p>
<p><em>Please note: In the example above the function <code><a href="../reference/model_DoseRate.html">model_DoseRate()</a></code> was called with two additional arguments, <code>n.MC = 10</code> and <code>txtProgressBar = FALSE</code>. The first argument limits the number of Monte Carlo runs for the error estimation to 10 and the second argument prevents the plotting of the progress bar, indicating the progression of the calculation. Both arguments were solely set to reduce calculation time and output in this vignette.</em></p>
<p>Obviously, you do not want to run each row in the input table, separately, to model the dose rate for all samples given in the example dataset you can call the model without subsetting the dataset first. <strong>Be careful, the calculation may take some time</strong>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">results &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_DoseRate.html">model_DoseRate</a></span>(</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  <span class="dt">data =</span> Example_Data)</a></code></pre></div>
</div>
</div>
<div id="using-your-own-dataset" class="section level1">
<h1 class="hasAnchor">
<a href="#using-your-own-dataset" class="anchor"></a>Using your own dataset</h1>
<p>Running only the example dataset is somewhat dissatisfactory, and the usual case will be that you provide your own dataset as input. While you can enter all data directly using R, the package offers another way, using external spreadsheet software such as ‘Libre Office’ (or, of course, MS Excel). The procedure is sketched in the following.</p>
<div id="create-template-table" class="section level2">
<h2 class="hasAnchor">
<a href="#create-template-table" class="anchor"></a>Create template table</h2>
<p>The function <code><a href="../reference/write_InputTemplate.html">write_InputTemplate()</a></code> was written to create a template table (a CSV-file) that can be subsequently opened and filled. Using the function ensures that your input data have the correct structure, e.g., the correct number for columns and column names.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/write_InputTemplate.html">write_InputTemplate</a></span>(<span class="dt">file =</span> <span class="st">"files/RCarb_Input.csv"</span>)</a></code></pre></div>
<p>The path given with the argument <code>file</code> can be modified as needed.</p>
</div>
<div id="enter-own-data-back-import-into-r" class="section level2">
<h2 class="hasAnchor">
<a href="#enter-own-data-back-import-into-r" class="anchor"></a>Enter own data &amp; back import into R</h2>
<p>Own data are added using an external spreadsheet program and then save again as CSV-file.</p>
<p><img src="files/Screenshot.png" width="400px" style="display: block; margin: auto;"></p>
<p>For re-importing, the data standard R functionality can be used.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/read.table">read.csv</a></span>(<span class="dt">file =</span> <span class="st">"files/RCarb_Input.csv"</span>)</a></code></pre></div>
</div>
<div id="model-the-dose-rate" class="section level2">
<h2 class="hasAnchor">
<a href="#model-the-dose-rate" class="anchor"></a>Model the dose rate</h2>
<p>The final modelling does not differ from the call already show above (here without a plot output):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">##run model </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">results &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_DoseRate.html">model_DoseRate</a></span>(</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  <span class="dt">data =</span> data,</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">  <span class="dt">n.MC =</span> <span class="dv">10</span>, </a>
<a class="sourceLine" id="cb12-5" data-line-number="5">  <span class="dt">txtProgressBar =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb12-6" data-line-number="6">  <span class="dt">plot =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## 
## [model_DoseRate()]
## 
##  Sample ID:       1 
##  Equivalent dose:     98  ±  9 Gy
##  Diameter:        180 µm 
##  MC runs error estim.:    10  
##  ------------------------------------------------ 
##  Age (conv.):         133.451  ±  15.228  ka
##  Age (new):       117.443  ±  7.973  ka
## 
##  Dose rate (conv.):   0.734  ±  0.045  Gy/ka
##  Dose rate (onset):   0.972  ±  0.067  Gy/ka
##  Dose rate (final):   0.76  ±  0.037  Gy/ka
##  ------------------------------------------------</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#scope">Scope</a></li>
      <li>
<a href="#quick-start-with-the-example-dataset">Quick start with the example dataset</a><ul class="nav nav-pills nav-stacked">
<li><a href="#load-rcarb">Load ‘RCarb’</a></li>
      <li><a href="#load-example-data">Load example data</a></li>
      <li><a href="#run-dose-rate-modelling">Run dose rate modelling</a></li>
      </ul>
</li>
      <li>
<a href="#using-your-own-dataset">Using your own dataset</a><ul class="nav nav-pills nav-stacked">
<li><a href="#create-template-table">Create template table</a></li>
      <li><a href="#enter-own-data-back-import-into-r">Enter own data &amp; back import into R</a></li>
      <li><a href="#model-the-dose-rate">Model the dose rate</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sebastian Kreutzer, Roger P. Nathan, Barbara Mauz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
