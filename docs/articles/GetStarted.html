<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with RCarb • RCarb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started with RCarb">
<meta property="og:description" content="RCarb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RCarb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/GetStarted.html">Get started with RCarb</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/R-Lum/RCarb/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="GetStarted_files/header-attrs-2.3/header-attrs.js"></script><script src="GetStarted_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started with RCarb</h1>
                        <h4 class="author">Sebastian Kreutzer<sup>1,2</sup> &amp; Barbara Mauz<sup>3</sup>
</h4>
            
            <h4 class="date">Last modified: 2020-09-15 (‘RCarb’ version: 0.1.4)</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/R-Lum/RCarb/blob/master/vignettes/GetStarted.Rmd"><code>vignettes/GetStarted.Rmd</code></a></small>
      <div class="hidden name"><code>GetStarted.Rmd</code></div>

    </div>

    
    
<p><sup>1</sup>Geography &amp; Earth Science, Aberystwyth University (United Kingdom)<br><sup>2</sup>IRAMAT-CRP2A, UMR 5060, CNRS - Université Bordeaux Montaigne (France)<br><sup>3</sup>Department of Geography and Geology, University of Salzburg, Salzburg (Austria)"</p>
<p><img src="../man/figures/Logo_RCarb.svg" width="100" style="display: block; margin: auto;"></p>
<div id="scope" class="section level1">
<h1 class="hasAnchor">
<a href="#scope" class="anchor"></a>Scope</h1>
<p>Getting started with a new <strong>R</strong> package can be a very tedious business (if not to say annoying). This document was written with the intention to make your first steps as painless as possible.</p>
</div>
<div id="quick-start-with-the-example-dataset" class="section level1">
<h1 class="hasAnchor">
<a href="#quick-start-with-the-example-dataset" class="anchor"></a>Quick start with the example dataset</h1>
<p>If you have no idea what a function does and how it works, it is always a good idea to have a closer look into the example sections of the package functions. The package <code>'RCarb'</code> has one central function named <code><a href="../reference/model_DoseRate.html">model_DoseRate()</a></code>. The example given in the example section in the manual will be used in the following to illustrate the central package functionality in three steps.</p>
<div id="load-rcarb" class="section level2">
<h2 class="hasAnchor">
<a href="#load-rcarb" class="anchor"></a>Load ‘RCarb’</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://r-lum.github.io/RCarb">RCarb</a></span>)
</pre></div>
</div>
<div id="load-example-data" class="section level2">
<h2 class="hasAnchor">
<a href="#load-example-data" class="anchor"></a>Load example data</h2>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co">##load example data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"Example_Data"</span>, envir = <span class="fu"><a href="https://rdrr.io/r/base/environment.html">environment</a></span>())
</pre></div>
<p>To get a first impression on how the example dataset looks like, you call the function <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> to print the first five rows of a <code>data.frame</code> on the terminal.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw">Example_Data</span>)
</pre></div>
<pre><code>##   SAMP_NAME     K   K_X    T  T_X    U  U_X U238 U238_X U234_U238 U234_U238_X
## 1     BN107 0.080 0.010 1.64 0.08 1.90 0.08    0      0         0           0
## 2     BN102 0.170 0.009 2.59 0.03 3.02 0.07    0      0         0           0
## 3     BN106 0.560 0.030 1.80 0.11 0.83 0.03    0      0         0           0
## 4      LV61 0.131 0.005 0.85 0.03 0.86 0.11    0      0         0           0
## 5      LV99 0.047 0.003 0.59 0.03 1.94 0.11    0      0         0           0
## 6      D101 0.105 0.004 0.65 0.02 1.25 0.08    0      0         0           0
##   WCI WCI_X WCF WCF_X CC CC_X DIAM DIAM_X COSMIC COSMIC_X INTERNAL INTERNAL_X
## 1  20     7   7     7 62    1  180     10  0.180   0.0100        0          0
## 2  20    10  10    10 68    1  180     22  0.180   0.0100        0          0
## 3  20     6   6     6 49    1  145     15  0.180   0.0100        0          0
## 4  12     5   2     2 17    1  210     30  0.069   0.0035        0          0
## 5   8     3   5     5 61    3  210     30  0.182   0.0090        0          0
## 6   8     3   2     2 59    2  210     20  0.180   0.0100        0          0
##   ONSET ONSET_X FINISH FINISH_X  DE DE_X
## 1   100      10     40       10  98    9
## 2   100      10     40       10 130   10
## 3   100      10     40       10 120   10
## 4   120      10     40       10  52    5
## 5    60      10     40       10  50    4
## 6   180      10    130       10  81    5</code></pre>
<p>Unfortunately, the naming of the table columns is not straightforward to understand. The good news is that each column carries additional information that can be seen in the <strong>R</strong> terminal by typing, e.g., for the column ‘K’ (which is the 2nd column):</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span>(<span class="kw">Example_Data</span><span class="op">$</span><span class="kw">K</span>)
</pre></div>
<pre><code>## $UNIT
## [1] "%"
## 
## $DESCRIPTION
## [1] "K concentration"</code></pre>
<p>It reveals that the numbers in the column correspond to the potassium concentration and are given in ‘%’. Similar all other columns can be inspected.</p>
<p>And here the full overview</p>
<table class="table">
<thead><tr class="header">
<th align="left">COLUM</th>
<th align="left">UNIT</th>
<th align="left">DESCRIPTION</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">SAMP_NAME</td>
<td align="left">NA</td>
<td align="left">Sample name, unique identifier</td>
</tr>
<tr class="even">
<td align="left">K</td>
<td align="left">%</td>
<td align="left">K concentration</td>
</tr>
<tr class="odd">
<td align="left">K_X</td>
<td align="left">%</td>
<td align="left">K concentration standard error</td>
</tr>
<tr class="even">
<td align="left">T</td>
<td align="left">ppm</td>
<td align="left">Th concentration</td>
</tr>
<tr class="odd">
<td align="left">T_X</td>
<td align="left">ppm</td>
<td align="left">Th concentration standard error</td>
</tr>
<tr class="even">
<td align="left">U</td>
<td align="left">ppm</td>
<td align="left">U concentration</td>
</tr>
<tr class="odd">
<td align="left">U_X</td>
<td align="left">ppm</td>
<td align="left">U concentration standard error</td>
</tr>
<tr class="even">
<td align="left">U238</td>
<td align="left">ppm</td>
<td align="left">U-238 concentration</td>
</tr>
<tr class="odd">
<td align="left">U238_X</td>
<td align="left">ppm</td>
<td align="left">U-238 concentration standard error</td>
</tr>
<tr class="even">
<td align="left">U234_U238</td>
<td align="left">NA</td>
<td align="left">U-234/U-238 activity ratio</td>
</tr>
<tr class="odd">
<td align="left">U234_U238_X</td>
<td align="left">NA</td>
<td align="left">U-234/U-238 activity ratio standard error</td>
</tr>
<tr class="even">
<td align="left">WCI</td>
<td align="left">% dry wt.</td>
<td align="left">Initial water content</td>
</tr>
<tr class="odd">
<td align="left">WCI_X</td>
<td align="left">% dry wt.</td>
<td align="left">Initial water content standard error</td>
</tr>
<tr class="even">
<td align="left">WCF</td>
<td align="left">% dry wt.</td>
<td align="left">Final water content</td>
</tr>
<tr class="odd">
<td align="left">WCF_X</td>
<td align="left">% dry wt.</td>
<td align="left">Final water content standard error</td>
</tr>
<tr class="even">
<td align="left">CC</td>
<td align="left">% dry wt.</td>
<td align="left">Carbonate content</td>
</tr>
<tr class="odd">
<td align="left">CC_X</td>
<td align="left">% dry wt.</td>
<td align="left">Carbonate content standard error</td>
</tr>
<tr class="even">
<td align="left">DIAM</td>
<td align="left">m x 10^-6</td>
<td align="left">Grain diameter</td>
</tr>
<tr class="odd">
<td align="left">DIAM_X</td>
<td align="left">m x 10^-6</td>
<td align="left">Grain diameter standard error</td>
</tr>
<tr class="even">
<td align="left">COSMIC</td>
<td align="left">Gy/ka</td>
<td align="left">Cosmic dose rate</td>
</tr>
<tr class="odd">
<td align="left">COSMIC_X</td>
<td align="left">Gy/ka</td>
<td align="left">Cosmic dose rate standard error</td>
</tr>
<tr class="even">
<td align="left">INTERNAL</td>
<td align="left">Gy/ka</td>
<td align="left">Internal dose rate</td>
</tr>
<tr class="odd">
<td align="left">INTERNAL_X</td>
<td align="left">Gy/ka</td>
<td align="left">Internal dose standard error</td>
</tr>
<tr class="even">
<td align="left">ONSET</td>
<td align="left">ka</td>
<td align="left">Carbonate onset</td>
</tr>
<tr class="odd">
<td align="left">ONSET_X</td>
<td align="left">ka</td>
<td align="left">Carbonate onset standard error</td>
</tr>
<tr class="even">
<td align="left">FINISH</td>
<td align="left">ka</td>
<td align="left">Carbonate completion</td>
</tr>
<tr class="odd">
<td align="left">FINISH_X</td>
<td align="left">ka</td>
<td align="left">Carbonate completion standard error</td>
</tr>
<tr class="even">
<td align="left">DE</td>
<td align="left">Gy</td>
<td align="left">Equivalent dose</td>
</tr>
<tr class="odd">
<td align="left">DE_X</td>
<td align="left">Gy</td>
<td align="left">Equivalent dose standard error</td>
</tr>
</tbody>
</table>
</div>
<div id="run-dose-rate-modelling" class="section level2">
<h2 class="hasAnchor">
<a href="#run-dose-rate-modelling" class="anchor"></a>Run dose rate modelling</h2>
<p>Now we want to start the modelling using the data given for the first sample only.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="co">##extract only the first row </span>
<span class="kw">data</span> <span class="op">&lt;-</span> <span class="kw">Example_Data</span>[<span class="fl">1</span>,]

<span class="co">##run model </span>
<span class="kw">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_DoseRate.html">model_DoseRate</a></span>(
  data = <span class="kw">data</span>,
  DR_conv_factors = <span class="st">"Carb2007"</span>,
  n.MC = <span class="fl">10</span>, 
  txtProgressBar = <span class="fl">FALSE</span>)
</pre></div>
<pre><code>## 
## [model_DoseRate()]
## 
##  Sample ID:       BN107 
##  Equivalent dose:     98  ±  9 Gy
##  Diameter:        180 µm 
##  MC runs error estim.:    10  
##  ------------------------------------------------ 
##  Age (conv.):         133.451  ±  13.203  ka
##  Age (new):       117.443  ±  10.903  ka
## 
##  Dose rate (conv.):   0.734  ±  0.033  Gy/ka
##  Dose rate (onset):   0.999  ±  0.048  Gy/ka
##  Dose rate (final):   0.751  ±  0.03  Gy/ka
##  ------------------------------------------------</code></pre>
<p><img src="GetStarted_files/figure-html/unnamed-chunk-7-1.png" width="480" style="display: block; margin: auto;"></p>
<p>The function returns a terminal output along with two plots, which are mostly similar to the original graphical output provided by the ‘MATLAB’ program ‘Carb’.</p>
<p>In the example above the function <code><a href="../reference/model_DoseRate.html">model_DoseRate()</a></code> was called with three additional arguments, <code>DR_conv_factors = "Carb2007"</code>, <code>n.MC = 10</code>, <code>txtProgressBar = FALSE</code>. The first argument selects the dose rate conversion factors used by ‘RCarb’. The second argument limits the number of Monte Carlo runs for the error estimation to 10 and the second argument prevents the plotting of the progress bar, indicating the progression of the calculation. Both arguments were solely set to reduce calculation time and output in this vignette.</p>
<p>Obviously, you do not want to run each row in the input table separately to model all dose rates, so to run all the modelling for all samples in the example dataset you can call the model without subsetting the dataset first. <strong>Be careful, the calculation may take some time</strong>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_DoseRate.html">model_DoseRate</a></span>(
  data = <span class="kw">Example_Data</span>)
</pre></div>
<p><em>A note on the used dose rate conversion factors: For historical reasons ‘Carb’ has its own set of dose rate conversion factors, which differ slightly from values in the literature (e.g., Adamiec &amp; Atiken, 1998) and are used in <code>'RCarb'</code> as default values. However, with <code>'RCarb' &gt;= 0.1.3</code> you can select other dose rate conversion factors. Please type <code><a href="../reference/Reference_Data.html">?RCarb::Reference_Data</a></code> in your <strong>R</strong> terminal for further details.</em></p>
</div>
</div>
<div id="using-your-own-dataset" class="section level1">
<h1 class="hasAnchor">
<a href="#using-your-own-dataset" class="anchor"></a>Using your own dataset</h1>
<p>Running only the example dataset is somewhat dissatisfactory, and the usual case will be that you provide your own dataset as input. While you can enter all data directly using R, the package offers another way, using external spreadsheet software such as ‘Libre Office’ (or, of course, MS Excel). The procedure is sketched in the following.</p>
<div id="create-template-table" class="section level2">
<h2 class="hasAnchor">
<a href="#create-template-table" class="anchor"></a>Create template table</h2>
<p>The function <code><a href="../reference/write_InputTemplate.html">write_InputTemplate()</a></code> was written to create a template table (a CSV-file) that can be subsequently opened and filled. Using the function ensures that your input data have the correct structure, e.g., the correct number for columns and column names.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="../reference/write_InputTemplate.html">write_InputTemplate</a></span>(file = <span class="st">"files/RCarb_Input.csv"</span>)
</pre></div>
<p>The path given with the argument <code>file</code> can be modified as needed.</p>
</div>
<div id="enter-own-data-back-import-into-r" class="section level2">
<h2 class="hasAnchor">
<a href="#enter-own-data-back-import-into-r" class="anchor"></a>Enter own data &amp; back import into R</h2>
<p>Own data are added using an external spreadsheet program and then save again as CSV-file.</p>
<p><img src="files/Screenshot.png" width="400px" style="display: block; margin: auto;"></p>
<p>For re-importing, the data standard R functionality can be used.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="kw">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(file = <span class="st">"files/RCarb_Input.csv"</span>)
</pre></div>
</div>
<div id="model-the-dose-rate" class="section level2">
<h2 class="hasAnchor">
<a href="#model-the-dose-rate" class="anchor"></a>Model the dose rate</h2>
<p>The final modelling does not differ from the call already show above (here without a plot output):</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="co">##run model </span>
<span class="kw">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_DoseRate.html">model_DoseRate</a></span>(
  data = <span class="kw">data</span>,
  n.MC = <span class="fl">10</span>, 
  txtProgressBar = <span class="fl">FALSE</span>, 
  plot = <span class="fl">FALSE</span>)
</pre></div>
<pre><code>## 
## [model_DoseRate()]
## 
##  Sample ID:       EXAMPLE 
##  Equivalent dose:     98  ±  9 Gy
##  Diameter:        180 µm 
##  MC runs error estim.:    10  
##  ------------------------------------------------ 
##  Age (conv.):         133.451  ±  19.107  ka
##  Age (new):       117.443  ±  12.432  ka
## 
##  Dose rate (conv.):   0.734  ±  0.039  Gy/ka
##  Dose rate (onset):   0.964  ±  0.064  Gy/ka
##  Dose rate (final):   0.734  ±  0.029  Gy/ka
##  ------------------------------------------------</code></pre>
</div>
</div>
<div id="i-dont-like-r" class="section level1">
<h1 class="hasAnchor">
<a href="#i-dont-like-r" class="anchor"></a>I don’t like R</h1>
<p>Well, then you are wrong here. However, if you are just tired of using the <strong>R</strong> terminal and you want to have a graphical user interface to interact with ‘RCarb’? Surprise: We also spent countless hours to develop a shiny application called ‘RCarb app’, and we ship it as part of the <strong>R</strong> package <a href="https://CRAN.R-project.org/package=RLumShiny">‘RLumShiny’</a>.</p>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Adamiec, G., Aitken, M.J., 1998. Dose-rate conversion factors: update. Ancient TL 16, 37–50. <a href="http://ancienttl.org/ATL_16-2_1998/ATL_16-2_Adamiec_p37-50.pdf" class="uri">http://ancienttl.org/ATL_16-2_1998/ATL_16-2_Adamiec_p37-50.pdf</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sebastian Kreutzer, Roger P. Nathan, Barbara Mauz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
